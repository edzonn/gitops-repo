graph TB
    subgraph "Developer Workspace"
        DEV[Developer]
        IDE[IDE/Code Editor]
        DEV --> IDE
    end

    subgraph "Source Control"
        APP_REPO[Application Repository<br/>Source Code]
        CONFIG_REPO[GitOps Repository<br/>Kubernetes Manifests]
        PR[Pull Request<br/>Review Process]
    end

    subgraph "CI Pipeline"
        BUILD[Build & Test]
        DOCKER[Build Docker Image]
        REGISTRY[Container Registry]
        UPDATE[Update Manifest]
    end

    subgraph "GitOps Operator"
        ARGOCD[ArgoCD/Flux<br/>Monitoring Git]
        SYNC[Sync Engine]
        DIFF[Diff & Compare]
    end

    subgraph "Kubernetes Cluster"
        K8S_API[Kubernetes API]
        DEPLOY[Deployments]
        SVC[Services]
        PODS[Pods]
        INGRESS[Ingress]
    end

    subgraph "Observability"
        MONITOR[Prometheus/Grafana]
        ALERT[Alerting]
        LOGS[Logging]
    end

    %% Developer Flow
    IDE -->|1. Commit Code| APP_REPO
    APP_REPO -->|2. Trigger| BUILD
    
    %% CI Pipeline Flow
    BUILD -->|3. Test Pass| DOCKER
    DOCKER -->|4. Push Image| REGISTRY
    DOCKER -->|5. Update Image Tag| UPDATE
    UPDATE -->|6. Commit Changes| CONFIG_REPO
    
    %% Review Process
    CONFIG_REPO -->|7. Create| PR
    PR -->|8. Approved & Merged| CONFIG_REPO
    
    %% GitOps Sync Flow
    CONFIG_REPO -.->|9. Poll/Webhook| ARGOCD
    ARGOCD -->|10. Fetch Manifests| DIFF
    DIFF -->|11. Compare State| K8S_API
    DIFF -->|12. Detect Drift| SYNC
    SYNC -->|13. Apply Changes| K8S_API
    
    %% Kubernetes Resources
    K8S_API -->|14. Create/Update| DEPLOY
    DEPLOY -->|15. Manage| PODS
    K8S_API -->|16. Create| SVC
    K8S_API -->|17. Configure| INGRESS
    
    %% Monitoring Flow
    PODS -.->|Metrics| MONITOR
    DEPLOY -.->|Status| ARGOCD
    MONITOR -->|Trigger| ALERT
    PODS -.->|Logs| LOGS
    
    %% Feedback Loop
    ARGOCD -.->|Sync Status| CONFIG_REPO
    ALERT -.->|Notify| DEV

    %% Styling
    classDef devClass fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef gitClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef ciClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef gitopsClass fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef k8sClass fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef obsClass fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    
    class DEV,IDE devClass
    class APP_REPO,CONFIG_REPO,PR gitClass
    class BUILD,DOCKER,REGISTRY,UPDATE ciClass
    class ARGOCD,SYNC,DIFF gitopsClass
    class K8S_API,DEPLOY,SVC,PODS,INGRESS k8sClass
    class MONITOR,ALERT,LOGS obsClass
